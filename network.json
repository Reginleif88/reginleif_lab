{
  "domain": "reginleif.io",
  "netbios": "REGINLEIF",
  "vlans": {
    "1": {
      "id": 1,
      "name": "Default/Unused",
      "description": "Blackhole VLAN (untagged on trunks, no IPs assigned)",
      "hq_subnet": "N/A",
      "branch_subnet": "N/A",
      "dhcp": false
    },
    "5": {
      "id": 5,
      "name": "Infrastructure",
      "description": "Domain Controllers, DNS, DHCP, OPNsense gateways (Infrastructure core services)",
      "hq_subnet": "172.16.5.0/24",
      "branch_subnet": "172.17.5.0/24",
      "dhcp": false
    },
    "10": {
      "id": 10,
      "name": "Clients",
      "description": "Windows 10/11 workstations",
      "hq_subnet": "172.16.10.0/24",
      "branch_subnet": "172.17.10.0/24",
      "dhcp": true,
      "dhcp_range": ".30-.254"
    },
    "20": {
      "id": 20,
      "name": "Servers",
      "description": "Member servers (Royal Server, KMS, CA, NPS/RADIUS, WDS/MDT)",
      "hq_subnet": "172.16.20.0/24",
      "branch_subnet": "172.17.20.0/24",
      "dhcp": false
    },
    "99": {
      "id": 99,
      "name": "Management",
      "description": "Admin access, out-of-band management",
      "hq_subnet": "172.16.99.0/24",
      "branch_subnet": "172.17.99.0/24",
      "dhcp": false
    }
  },
  "sites": {
    "hq": {
      "id": "hq",
      "name": "HQ (Proxmox)",
      "wan": "192.168.1.240",
      "vlans": {
        "5": { "subnet": "172.16.5.0/24", "gateway": "172.16.5.1" },
        "10": { "subnet": "172.16.10.0/24", "gateway": "172.16.10.1" },
        "20": { "subnet": "172.16.20.0/24", "gateway": "172.16.20.1" },
        "99": { "subnet": "172.16.99.0/24", "gateway": "172.16.99.1" }
      },
      "devices": [
        {
          "id": "opnsense-hq",
          "name": "OPNsenseHQ",
          "ip": "172.16.5.1",
          "os": "OPNsense (FreeBSD)",
          "role": "Gateway/Firewall",
          "icon": "shield",
          "vlan": 5,
          "description": "Primary firewall and router for HQ site"
        },
        {
          "id": "dc1",
          "name": "P-WIN-DC1",
          "ip": "172.16.5.10",
          "os": "Windows Server 2022 Core",
          "role": "DC, DNS, DHCP",
          "icon": "server",
          "vlan": 5,
          "dns_servers": ["172.17.5.10", "172.16.5.10"],
          "ad_site": "HQ-Proxmox",
          "description": "Primary DC, DNS, DHCP, Forest Root"
        },
        {
          "id": "srv1",
          "name": "P-WIN-SRV1",
          "ip": "172.16.99.11",
          "os": "Windows Server 2022",
          "role": "Secure Gateway",
          "icon": "monitor",
          "vlan": 99,
          "ports": [54899, 22],
          "description": "Remote access gateway (bastion host on Management VLAN)"
        },
        {
          "id": "srv2",
          "name": "P-WIN-SRV2",
          "ip": "172.16.20.12",
          "os": "Windows Server 2022",
          "role": "KMS",
          "icon": "server",
          "vlan": 20,
          "ports": [1688],
          "description": "Key Management Service (Volume Activation)"
        },
        {
          "id": "srv3",
          "name": "P-WIN-SRV3",
          "ip": "172.16.20.13",
          "os": "Windows Server 2022",
          "role": "Enterprise Subordinate CA",
          "icon": "server",
          "vlan": 20,
          "ports": [80, 443],
          "description": "Enterprise Subordinate CA (REGINLEIF-SUB-CA), Certificate Authority, IIS for CRL/AIA Distribution"
        },
        {
          "id": "rootca",
          "name": "P-WIN-ROOTCA",
          "ip": "172.16.20.15",
          "os": "Windows Server 2022",
          "role": "Offline Root CA",
          "icon": "shield",
          "vlan": 20,
          "description": "Standalone Root CA (REGINLEIF-ROOT-CA) - Offline, powered on annually for CRL renewal"
        },
        {
          "id": "srv4",
          "name": "P-WIN-SRV4",
          "ip": "172.16.20.14",
          "os": "Windows Server 2022",
          "role": "NPS (RADIUS), WDS/MDT",
          "icon": "server",
          "vlan": 20,
          "ports": [1812, 1813, 69, 445],
          "description": "Network Policy Server for RADIUS authentication; Windows Deployment Services and MDT for OS deployment"
        }
      ]
    },
    "branch": {
      "id": "branch",
      "name": "Branch (Hyper-V)",
      "wan": "192.168.1.245",
      "vlans": {
        "5": { "subnet": "172.17.5.0/24", "gateway": "172.17.5.1" },
        "10": { "subnet": "172.17.10.0/24", "gateway": "172.17.10.1" },
        "20": { "subnet": "172.17.20.0/24", "gateway": "172.17.20.1" },
        "99": { "subnet": "172.17.99.0/24", "gateway": "172.17.99.1" }
      },
      "devices": [
        {
          "id": "opnsense-branch",
          "name": "OPNsenseBranch",
          "ip": "172.17.5.1",
          "os": "OPNsense (FreeBSD)",
          "role": "Gateway/Firewall",
          "icon": "shield",
          "vlan": 5,
          "description": "Primary firewall for Branch site"
        },
        {
          "id": "dc2",
          "name": "H-WIN-DC2",
          "ip": "172.17.5.10",
          "os": "Windows Server 2022 Core",
          "role": "DC, DNS, DHCP",
          "icon": "server",
          "vlan": 5,
          "dns_servers": ["172.16.5.10", "172.17.5.10"],
          "ad_site": "Branch-HyperV",
          "description": "Secondary DC, DNS, DHCP for Branch site"
        }
      ]
    },
    "cloud": {
      "id": "cloud",
      "name": "Cloud/Hybrid",
      "description": "Placeholder for future cloud/hybrid integration - not yet implemented",
      "vlans": {},
      "wan": "",
      "devices": []
    },
    "wg-peers": {
      "id": "wg-peers",
      "name": "WireGuard Peers",
      "subnet": "10.200.0.0/24",
      "gateway": "",
      "wan": "",
      "devices": [
        {
          "id": "admin-pc",
          "name": "Admin PC",
          "ip": "10.200.0.10",
          "role": "Road Warrior",
          "icon": "monitor",
          "description": "Admin Workstation (Home LAN)"
        }
      ]
    }
  },
  "tunnel": {
    "name": "WireGuard VPN",
    "description": "Site-to-Site VPN carrying AD replication, DNS, and inter-site traffic",
    "protocol": "WireGuard",
    "port": 51820,
    "keepalive": 25,
    "subnet": "10.200.0.0/24",
    "endpoints": {
      "hq": {
        "wan": "192.168.1.240",
        "tunnel": "10.200.0.1"
      },
      "branch": {
        "wan": "192.168.1.245",
        "tunnel": "10.200.0.2"
      }
    },
    "routes": {
      "hq_to_branch": ["172.17.5.0/24", "172.17.10.0/24", "172.17.20.0/24", "172.17.99.0/24"],
      "branch_to_hq": ["172.16.5.0/24", "172.16.10.0/24", "172.16.20.0/24", "172.16.99.0/24"]
    },
    "peer_routes": {
      "peers_to_hq": "172.16.99.0/24",
      "peers_to_branch": "172.17.99.0/24",
      "peers_to_tunnel": "10.200.0.0/24",
      "_comment": "Road Warriors restricted to Management VLANs only (Project 16). All other access via Royal Server gateway."
    }
  },
  "trusted_networks": [
    "172.16.5.0/24",
    "172.16.10.0/24",
    "172.16.20.0/24",
    "172.16.99.0/24",
    "172.17.5.0/24",
    "172.17.10.0/24",
    "172.17.20.0/24",
    "172.17.99.0/24",
    "10.200.0.0/24"
  ]
}
